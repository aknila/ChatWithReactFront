(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,a){e.exports=a(187)},125:function(e,t,a){},133:function(e,t,a){},178:function(e,t){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(45),o=(a(125),a(15)),l=a(16),c=a(18),r=a(17),d=a(19),u=a(68),h=a(31),m=a(65),p=(a(133),a(4)),g=a(215),f=a(217),y=a(111),v=a(214),x=a(110),E=a(194),k=a(219),b=a(218),M=i.a.createContext(void 0),w={childrenGap:10},j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e)))._isMounted=!1,a._showPanel=function(e){return function(){var t=a.state.showPanel;t[e]=!0,a._isMounted&&a.setState({showPanel:t})}},a._hidePanel=function(e){return function(){var t=a.state.showPanel;t[e]=!1,a._isMounted&&a.setState({showPanel:t})}},a.state={showPanel:{panel:!1,chan:!1}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e={root:{fontSize:"10px",color:"#aaa",padding:0}},t={imageFit:p.b.contain,width:200,height:200};return i.a.createElement("div",null,i.a.createElement(g.a,{horizontalAlign:"center",padding:10,tokens:w},i.a.createElement(f.a,{variant:"xLarge"},"Chat With React (Connected: ",this.context.count,")"),i.a.createElement(g.a,{horizontalAlign:"center",horizontal:!0,tokens:w},i.a.createElement(y.a,{text:"Channel List",onClick:this._showPanel("chan")}),i.a.createElement(y.a,{text:"Profil Settings",onClick:this._showPanel("panel")}))),i.a.createElement(v.a,{isOpen:this.state.showPanel.panel,isLightDismiss:!0,headerText:"Profil Settings",onDismiss:this._hidePanel("panel")},i.a.createElement(x.a,Object.assign({},t,{src:this.context.pdp?this.context.pdp:"https://www.freeiconspng.com/uploads/discord-metro-style-icon-0.png",alt:"Profil Photo"})),i.a.createElement(E.a,{styles:e,htmlFor:"idName"},"Name"),i.a.createElement(k.a,{className:"textInput",id:"idName",multiline:!1,resizable:!1,placeholder:"Anonyme",value:this.context.author,onChange:this.context.changeName}),i.a.createElement(E.a,{styles:e,htmlFor:"idProfil"},"Image"),i.a.createElement(k.a,{className:"textInput",id:"idProfil",multiline:!1,resizable:!1,placeholder:"Image Url",value:this.context.pdp,onChange:this.context.changeUrl})),i.a.createElement(v.a,{isOpen:this.state.showPanel.chan,isLightDismiss:!0,headerText:"Channel",onDismiss:this._hidePanel("chan")},i.a.createElement(g.a,{horizontalAlign:"center",padding:10,tokens:w},i.a.createElement(b.a,{className:"channelBlock",href:"/salon/1"},"Salon 1"),i.a.createElement(b.a,{className:"channelBlock",href:"/salon/2"},"Salon 2"),i.a.createElement(b.a,{className:"channelBlock",href:"/salon/3"},"Salon 3"),i.a.createElement(b.a,{className:"channelBlock",href:"/salon/4"},"Salon 4"),i.a.createElement(b.a,{className:"channelBlock",href:"/salon/5"},"Salon 5"))))}}]),t}(i.a.Component);j.contextType=M;var O=a(221),_=a(213),C=a(106),P=a.n(C),S={childrenGap:10},N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).myUploadRef=void 0,a.keyPress=function(e){13===e.keyCode&&a.sendNewMessage()},a.sendNewMessage=function(){a.state.message&&(a.context.sendMessage(a.context.author?a.context.author:"Anonyme",a.state.message,a.context.id,a.context.pdp,"message",null),a.setState({message:void 0}))},a.onChange=function(e,t){a.setState({message:t})},a.clickUpload=function(){a.myUploadRef&&a.myUploadRef.current&&a.myUploadRef.current.click()},a.uploadFile=function(e){if(e){var t=new FormData;t.append("file",e[0]),P.a.post(a.context.endpoint+"/upload",t).then(function(e){var t=a.context.endpoint+"/static/"+e.data.filename.split(" ").join("%20"),n=e.data.originalname;a.context.sendMessage(a.context.author?a.context.author:"Anonyme",t,a.context.id,a.context.pdp,"file",n)})}},a.state={message:void 0},a.myUploadRef=i.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(g.a,{horizontal:!0,horizontalAlign:"center",padding:10,tokens:S},i.a.createElement(g.a.Item,{align:"center"},i.a.createElement(O.a,{iconProps:{iconName:"CirclePlus"},title:"Upload",onClick:this.clickUpload})),i.a.createElement(g.a.Item,{align:"center"},i.a.createElement(k.a,{id:"sendInput",multiline:!1,resizable:!1,placeholder:"Type message...",value:this.state.message,onChange:this.onChange,onKeyUp:this.keyPress})),i.a.createElement(g.a.Item,{align:"center"},i.a.createElement(_.a,{id:"sendButton",text:"Send",onClick:this.sendNewMessage})),i.a.createElement("input",{ref:this.myUploadRef,style:{display:"none"},type:"file",onChange:function(t){return e.uploadFile(t.target.files)}}))}}]),t}(i.a.Component);N.contextType=M;var I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).editMsg=function(e){a.setState({edit:!0,tmp:e,newText:e})},a.keyPress=function(e){13===e.keyCode&&a.validEditMessage(),27===e.keyCode&&a.setState({edit:!1,tmp:null,newText:null})},a.validEditMessage=function(){var e=a.state.newText;a.setState({edit:!1,tmp:null,newText:null}),e?a.context.editMessage(a.props.uid,e):a.context.deleteMessage(a.props.uid)},a.onChange=function(e,t){a.setState({newText:t})},a.state={edit:!1,tmp:null,newText:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,a=this,n=this.props,s=n.author,o=n.text,l=n.id,c=n.aid,r=n.date,d=n.uid,u=n.type,h=n.link,m={imageFit:p.b.contain,width:100,height:100},y=o.match(/(^data:image\/([a-zA-Z]*);base64,([^\"]*))|(\.(gif|jpe?g|tiff|png)$)/i);return t="message"===u?this.state.edit?i.a.createElement(k.a,{className:"inputEditContainer",inputClassName:"inputEdit",borderless:!0,multiline:!1,resizable:!1,id:l,value:this.state.newText,onChange:this.onChange,onKeyUp:this.keyPress}):y&&y.length>0?i.a.createElement(x.a,Object.assign({},m,{src:o,alt:"Photo in message"})):i.a.createElement(f.a,{id:l},o):y&&y.length>0?i.a.createElement(x.a,Object.assign({},m,{src:o,alt:h})):i.a.createElement(b.a,{className:"fileLink",href:o},h),c===this.context.id&&"message"===u?e=i.a.createElement(O.a,{"data-automation-id":"test",text:"",splitButtonAriaLabel:"See 2 sample options","aria-roledescription":"split button",style:{height:"35px"},menuProps:{items:[{key:"editMessage",text:"Edit",iconProps:{iconName:"CodeEdit"},onClick:function(){return a.editMsg(o)}},{key:"deleteMessage",text:"Delete",iconProps:{iconName:"Delete"},onClick:function(){return a.context.deleteMessage(d)}}]}}):c===this.context.id&&(e=i.a.createElement(O.a,{"data-automation-id":"test",text:"",splitButtonAriaLabel:"See 1 sample options","aria-roledescription":"split button",style:{height:"35px"},menuProps:{items:[{key:"deleteMessage",text:"Delete",iconProps:{iconName:"Delete"},onClick:function(){return a.context.deleteMessage(d)}}]}})),i.a.createElement("div",null,i.a.createElement(g.a,{horizontal:!0},i.a.createElement(g.a,{id:"messageItem",className:c===this.context.id?"containerItemAuthor":"containerItem",padding:7},i.a.createElement(E.a,{styles:{root:{fontSize:"10px",color:"#ffffff",padding:0}},htmlFor:l},s,"#",c.substring(0,4)," ",r),t),i.a.createElement("div",null,e)))}}]),t}(i.a.Component);I.contextType=M;var U={childrenGap:10},D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e)))._isMounted=!1,a.myRef=void 0,a.scrollToBottom=function(){a.myRef&&a.myRef.current&&a._isMounted&&a.myRef.current.scrollIntoView({behavior:"smooth"})},a.myRef=i.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.list,t=Object.keys(e),a={imageFit:p.b.contain,width:50,height:50,className:"pdpImage"};return i.a.createElement(g.a,{className:"container",tokens:U},t.map(function(t){return i.a.createElement(g.a,{key:t,horizontal:!0,tokens:{childrenGap:5},className:"subContainer"},i.a.createElement(x.a,Object.assign({},a,{src:e[t].pdp?e[t].pdp:"https://www.freeiconspng.com/uploads/discord-metro-style-icon-0.png",alt:"Profil Photo"})),i.a.createElement(I,Object.assign({id:t},e[t])))}),i.a.createElement("div",{style:{float:"left",clear:"both"},ref:this.myRef}))}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){"new"===this.props.lastEvent&&this._isMounted&&this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}}]),t}(i.a.Component);D.contextType=M;var T=a(107),z=a.n(T),A=a(67),R=a.n(A),B=a(108),F=a.n(B),K=a(109);Object(K.a)();var L=1,W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e)))._isMounted=!1,a.updateData=function(e){a._isMounted&&a.setState({count:e.count})},a.loadMore=function(){if(a._isMounted){var e=Object.keys(a.state.list).length+5;a.state.socket.emit("history",{len:e})}},a._getHistory=function(e){if(a._isMounted){var t={};e.save.forEach(function(e){var a=L++;t=Object(m.a)({},t,Object(h.a)({},a,{author:e.author,text:e.text,aid:e.aid,pdp:e.pdp,date:e.date,uid:e.uid,type:e.type,link:e.link}))}),a.setState({list:t})}},a._wEditMessage=function(e,t){a._isMounted&&a.state.socket.emit("edit message",{uid:e,text:t})},a._wDeleteMessage=function(e){a._isMounted&&a.state.socket.emit("delete message",{uid:e})},a._editMessage=function(e){if(a._isMounted){var t=a.state.list,n=t,i=Object.keys(t).filter(function(a){return t[a].uid===e.uid});i&&i.length>0&&n[i[0]]&&(n[i[0]].text=e.text,a.setState({list:n,lastEvent:"edit"}))}},a._deleteMessage=function(e){if(a._isMounted){var t=a.state.list,n=t,i=Object.keys(t).filter(function(a){return t[a].uid===e.uid});i&&i.length>0&&n[i[0]]&&(delete n[i[0]],a.setState({list:n,lastEvent:"delete"})),Object.keys(n).length<7&&a.state.socket.emit("history",{len:7})}},a._sendMessage=function(e,t,n,i,s,o){if(a._isMounted){var l=F()().format("hh:mm A").toString();a.state.socket.emit("chat message",{author:e,text:t,aid:n,pdp:i,uid:R()(),date:l,type:s,link:o})}},a._newMessage=function(e){if(a._isMounted){var t=a.state.list,n=L++;a.setState({list:Object(m.a)({},t,Object(h.a)({},n,{author:e.author,text:e.text,aid:e.aid,pdp:e.pdp,date:e.date,uid:e.uid,type:e.type,link:e.link})),lastEvent:"new"})}},a.changeName=function(e,t){a._isMounted&&a.setState({author:t})},a.changeUrl=function(e,t){a._isMounted&&a.setState({pdp:t})},a.state={list:{},lastEvent:"",author:localStorage.getItem("contextAuthorKey"),endpoint:"http://212.47.251.157:4001",socket:null,count:1,id:localStorage.getItem("contextIdKey"),pdp:localStorage.getItem("contextPdpKey")},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.state.id?this.state.id:R()(),a=this.state.author?this.state.author:"",n=this.state.pdp?this.state.pdp:"",i=this.state.endpoint,s=this.props.salonId,o=z()(i+"/salon"+(s>0&&s<=5?s:"1"));o.on("history",this._getHistory),o.on("chat message",function(t){e._newMessage(t)}),o.on("new on",this.updateData),o.on("new off",this.updateData),o.on("delete message",this._deleteMessage),o.on("edit message",this._editMessage),this._isMounted&&this.setState({socket:o,id:t,pdp:n,author:a})}},{key:"componentDidUpdate",value:function(e,t){this.state.id!==t.id&&localStorage.setItem("contextIdKey",this.state.id),this.state.author!==t.author&&localStorage.setItem("contextAuthorKey",this.state.author),this.state.pdp!==t.pdp&&localStorage.setItem("contextPdpKey",this.state.pdp)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.list,a=e.author,n=e.count,s=e.id,o=e.pdp,l=e.endpoint;return i.a.createElement("div",{className:"App"},i.a.createElement(M.Provider,{value:{list:t,author:a,count:n,id:s,pdp:o,sendMessage:this._sendMessage,changeName:this.changeName,changeUrl:this.changeUrl,editMessage:this._wEditMessage,deleteMessage:this._wDeleteMessage,endpoint:l}},i.a.createElement(j,null),i.a.createElement(b.a,{styles:{root:{padding:5}},onClick:this.loadMore},"Load more"),i.a.createElement(D,{lastEvent:this.state.lastEvent}),i.a.createElement(N,null)))}}]),t}(i.a.Component),G=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(u.b,null,i.a.createElement(u.a,{noThrow:!0,from:"*",to:"/salon/1"}),i.a.createElement(W,{path:"/salon/:salonId"}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.render)(i.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.d9fc483a.chunk.js.map